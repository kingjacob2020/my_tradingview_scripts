// This source code is subject to the terms of the Mozilla Public License 2.0 at https://mozilla.org/MPL/2.0/
// Â© kingjacob2020

//@version=4
strategy("My Strategy", overlay=true, margin_long=100, margin_short=100)

fastLength = input(12)
slowlength = input(26)
MACDLength = input(9)
MACD = ema(close, fastLength) - ema(close, slowlength)
aMACD = ema(MACD, MACDLength)
delta = MACD - aMACD

smoothK = input(3, "K", minval=1)
smoothD = input(3, "D", minval=1)
lengthRSI = input(14, "RSI Length", minval=1)
lengthStoch = input(14, "Stochastic Length", minval=1)
src = input(close, title="RSI Source")
rsi1 = rsi(src, lengthRSI)
k = sma(stoch(rsi1, rsi1, rsi1, lengthStoch), smoothK)
d = sma(k, smoothD)

length = input(12)
price = close
momentum(seria, length) =>
	mom = seria - seria[length]
	mom
mom0 = momentum(price, length)
mom1 = momentum( mom0, 1)

longCondition = (mom0 > 0 and mom1 > 0), crossover(k, d), crossover(delta, 0)
if (longCondition)
    strategy.entry("BUY", strategy.long)
else
	strategy.cancel("buy canceled")

shortCondition = (mom0 < 0 and mom1 < 0), crossunder(k, d), crossunder(delta, 0)
if (shortCondition)
    strategy.entry("SELL", strategy.short)
else
	strategy.cancel("sell canceled")
